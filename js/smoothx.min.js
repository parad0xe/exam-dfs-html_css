var t=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r};var e=function(e){if(Array.isArray(e))return t(e)};var n=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)};var r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}};var o=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var i=function(t){return e(t)||n(t)||r(t)||o()};var a=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function s(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var c=s((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new R(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?d:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",m={};function y(){}function v(){}function _(){}var g={};g[i]=function(){return this};var x=Object.getPrototypeOf,T=x&&x(x(I([])));T&&T!==n&&r.call(T,i)&&(g=T);var w=_.prototype=y.prototype=Object.create(g);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,b(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function I(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return v.prototype=w.constructor=_,_.constructor=v,v.displayName=c(_,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(P.prototype),P.prototype[a]=function(){return this},t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,s,"Generator"),w[i]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function u(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var l=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,s,"next",t)}function s(t){u(i,r,o,a,s,"throw",t)}a(void 0)}))}};var f=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t},d=s((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e})),m={typing:{isArray:function(t){return"[object Array]"===toString.call(t)},isObject:function(t){return"[object Object]"===toString.call(t)},isNumber:function(t){return"[object Number]"===toString.call(t)},isBoolean:function(t){return"[object Boolean]"===toString.call(t)},isString:function(t){return"[object String]"===toString.call(t)},isHTMLElement:function(t){return t instanceof HTMLElement},isFunction:function(t){return"[object Function]"===toString.call(t)}},dom:{hasTransform:function(t,e){return void 0!==e.style.transform&&-1!==e.style.transform.indexOf(t)},removeTransform:function(t,e){var n=t.style.transform.indexOf(e),r=t.style.transform.indexOf(")",n)+1;t.style.transform=t.style.transform.slice(0,n)+t.style.transform.slice(r)},replaceTransform:function(t,e,n){if(""!==n&&"none"!==n)if(m.dom.hasTransform(e,t)){var r=t.style.transform.indexOf(e),o=t.style.transform.indexOf(")",r)+1;t.style.transform=t.style.transform.slice(0,r)+n+t.style.transform.slice(o)}else{var i=t.style.transform;t.style.transform=""===i||"none"===i?"".concat(n):"".concat(i," ").concat(n)}else m.dom.removeTransform(t,e)},hasTransition:function(t,e){return void 0!==e.style.transition&&-1!==e.style.transition.indexOf(t)},setTransitionDuration:function(t,e,n){var r=n.style.transition.indexOf(t)+t.length+1,o=n.style.transition.indexOf(" ",r);n.style.transition=n.style.transition.slice(0,r)+"".concat(e,"s")+n.style.transition.slice(o)},setTransitionEffect:function(t,e,n){var r=n.style.transition.indexOf(" ",n.style.transition.indexOf(t)+t.length+1)+1,o=n.style.transition.indexOf(" 0s",r);n.style.transition=n.style.transition.slice(0,r)+"".concat(e)+n.style.transition.slice(o)},addTransition:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ease-in-out";n/=1e3,m.dom.hasTransition(e,t)?(m.dom.setTransitionDuration(e,n,t),m.dom.setTransitionEffect(e,r,t)):t.style.transition=""!==t.style.transition?"".concat(t.style.transition,", ").concat(e," ").concat(n,"s ").concat(r," 0s"):"".concat(e," ").concat(n,"s ").concat(r," 0s")},removeTransition:function(t,e){if(m.dom.hasTransition(e,t)){var n=t.style.transition.indexOf(e),r=t.style.transition.indexOf("0s",n+e.length+2)+3;t.style.transition=t.style.transition.slice(0,n)+t.style.transition.slice(r)}}},random:function(){for(var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null!==(t=o.block_count)&&void 0!==t?t:1,a=null!==(e=o.block_separator)&&void 0!==e?e:"-",s=null!==(n=o.charset)&&void 0!==n?n:"ABCDEFabcdef0123456789",c=[],u=0;u<i;u++){for(var l="",f=0;f<r;f++)l+=s.charAt(Math.floor(Math.random()*s.length));c.push(l)}return c.join(a)},deepClone:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Object.prototype.hasOwnProperty.call(t,"__callstack-token.reference__"))return t["__callstack-token.reference__"];var n=Object.create(t);for(var r in t["__callstack-token.reference__"]=n,t)if("__callstack-token.reference__"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var o=d(t[r]);"object"===o&&null!==t[r]?n[r]=m.deepClone(t[r],e+1):n[r]=t[r]}if(0===e){var i=function t(e){if(Object.prototype.hasOwnProperty.call(e,"__callstack-token.reference__"))for(var n in delete e["__callstack-token.reference__"],e){if(Object.prototype.hasOwnProperty.call(e,n))"object"===d(e[n])&&null!==e[n]&&t(e[n])}};i(n),i(t)}return n},clone:function(t){if(m.typing.isObject(t))return m.deepClone(t);if(m.typing.isArray(t))return i(t);if(m.typing.isHTMLElement(t))return t.cloneNode(!0);throw new Error('Cannot clone item (Type "'.concat(toString.call(t),'" not supported)'))},widthToRelativePercentPx:function(t,e){var n=getComputedStyle(e.parentElement),r=getComputedStyle(e),o=parseInt(n.marginLeft)+parseInt(n.marginRight),i=parseInt(r.marginLeft)+parseInt(r.marginRight);return(e.parentElement.offsetWidth+o-(e.offsetWidth+i))*(t/100)},heightToRelativePercentPx:function(t,e){var n=getComputedStyle(e.parentElement),r=getComputedStyle(e),o=parseInt(n.marginTop)+parseInt(n.marginBottom),i=parseInt(r.marginTop)+parseInt(r.marginBottom);return(e.parentElement.offsetHeight+o-(e.offsetHeight+i))*(t/100)},current:function(t,e){return e.querySelector(t)},prevOf:function(t,e){var n=null,r=e.querySelector(t);return Array.from(e.children).map((function(t,o){null===n&&t===r&&(n=o-1==-1?e.children.length-1:o-1)})),e.children[n]},nextOf:function(t,e){var n=null,r=e.querySelector(t);return Array.from(e.children).map((function(t,o){null===n&&t===r&&(n=o+1===e.children.length?0:o+1)})),e.children[n]},toArray:function(t){return t instanceof NodeList||t instanceof DOMTokenList||t instanceof DOMStringMap?t=Array.from(t):m.typing.isArray(t)||(t=[t]),t},randint:function(t,e){return Math.floor(Math.random()*e)+t},zArray:function(t){return Array.from({length:t},(function(){return 0}))}},y="smooth",v="hard",_="keep",g=s((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var x=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)};var T=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var w=function(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?T(t):e},O=s((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e})),P=70,b=function(){function t(){f(this,t),this._start_at=0,this._max_step_histories=10,this.step_histories=[]}return h(t,[{key:"start",value:function(){this._start_at=window.performance.now()}},{key:"step",value:function(){var t=window.performance.now()-this._start_at-P;this.step_histories.push(t),this.step_histories.length>this._max_step_histories&&this.step_histories.shift()}}]),t}();function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}var S=function(t){x(n,b);var e=E(n);function n(){var t;return f(this,n),(t=e.call(this)).duration=0,t}return n}(),R=function t(){f(this,t),this.paused=!1,this.ready=!1,this.started=!1,this.finished=!1,this.revoked=!1};function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}var L=function(t){x(n,b);var e=I(n);function n(t){var r;return f(this,n),(r=e.call(this)).duration=t.duration,r.delay=t.delay,r._gap=t.gap,r._sleep=t.sleep,r._endStateMode=t.endStateMode,r}return h(n,[{key:"getMaxDuration",value:function(){var t=this.delay+this._sleep;return t+=this._endStateMode===y?2*this.duration:this.duration}}]),n}(),k=function t(){f(this,t),this.ready=!1,this.started=!1,this.finished=!1},A="(The subprocess of sequence has changed)",j={LATEST_TRANSITION_BY_PROPS:{},LATEST_TRANSITION_WAIT_BEFORE_NEXT:{}},N=function(){function t(){var e,n,r,o,i,a,s,c,u,l,p,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),this.id=m.random(),this.payloads=[],this.options={duration:null!==(e=h.duration)&&void 0!==e?e:0,delay:null!==(n=h.delay)&&void 0!==n?n:0,gap:null!==(r=h.gap)&&void 0!==r?r:0,sleep:null!==(o=h.sleep)&&void 0!==o?o:0,waitBeforeNext:null===(i=h.waitBeforeNext)||void 0===i||i,endStateMode:null!==(a=h.endStateMode)&&void 0!==a?a:y,effect:null!==(s=h.effect)&&void 0!==s?s:"ease-in-out",resetOnEnd:null!==(c=h.resetOnEnd)&&void 0!==c&&c,repeatCount:null!==(u=h.repeatCount)&&void 0!==u?u:1,repeatDelay:null!==(l=h.repeatDelay)&&void 0!==l?l:0,reverse:null!==(p=h.reverse)&&void 0!==p&&p},0===h.duration&&void 0===h.endStateMode&&(this.options.endStateMode=_),this.context={runtime:new L(this.options),status:new k}}return h(t,[{key:"process",value:function(t,e,n){var r=this;return new Promise((function(o){r.payloads.map((function(i){Promise.all(i.compilations.map((function(o){return r.__processBegin(t,e,o,n)}))).then(o)}))}))}},{key:"__processBegin",value:function(t,e,n,r){var o=this;return new Promise((function(i){o.context.runtime.duration<=0?o.__delay(t,o.context.runtime.delay).then((function(r){return o.__processInstant(t,e,n)})):o.__delay(t,o.context.runtime.delay).then((function(r){return o.__processLong(t,e,n)})),o.options.resetOnEnd?o.__delay(t,P+t.context.runtime.duration).then((function(a){return o.__processEnd(t,e,n,i,r)})):o.__delay(t,P+o.context.runtime.duration+o.options.sleep+o.context.runtime.delay).then((function(a){return o.__processEnd(t,e,n,i,r)}))}))}},{key:"__processInstant",value:function(t,e,n){m.dom.removeTransition(e.element,n.on),n.onProcess.call(this,e.element,n.on,n.name,n.value,m.dom)}},{key:"__processLong",value:function(t,e,n){m.dom.addTransition(e.element,n.on,this.context.runtime.duration,n.effect),n.onProcess.call(this,e.element,n.on,n.name,n.value,m.dom)}},{key:"__processEnd",value:function(t,e,n,r,o){switch(this.options.endStateMode){case _:r();break;case v:m.dom.removeTransition(e.element,n.on),"transform"===n.on?m.dom.removeTransform(e.element,n.name):e.element.style[n.on]=o(e,"computed",n.on),r();break;case y:if(m.dom.addTransition(e.element,n.on,this.context.runtime.duration,n.effect),"transform"===n.on){var i=o(e,"computed",n.on);m.dom.replaceTransform(e.element,n.name,i)}else e.element.style[n.on]=o(e,"computed",n.on);this.__delay(t,this.context.runtime.duration).then(r)}}},{key:"__delay",value:function(t,e){var n=t.id;return new Promise(0===e?function(e,r){n===t.id?e():r(A)}:function(r,o){setTimeout((function(){n===t.id?r():o(A)}),e)})}}],[{key:"cleanTransitionDelay",value:function(t,e){var n;if(Object.prototype.hasOwnProperty.call(j.LATEST_TRANSITION_BY_PROPS,t)){var r=j.LATEST_TRANSITION_BY_PROPS[t],o=null!==(n=j.LATEST_TRANSITION_WAIT_BEFORE_NEXT[t])&&void 0!==n?n:null;null!==o&&e.context.runtime.delay<o.context.runtime.getMaxDuration()&&(e.context.runtime.delay+=o.context.runtime.getMaxDuration()-e.context.runtime.delay),e.payloads.map((function(t){t.properties.map((function(t){if(void 0!==r.name[t.name]){var n=r.name[t.name];e.context.runtime.delay<n.context.runtime.getMaxDuration()&&(e.context.runtime.delay+=n.context.runtime.getMaxDuration()-e.context.runtime.delay)}if(void 0!==r.on[t.on]){var o=r.on[t.on];e.context.runtime.duration!==o.context.runtime.duration&&e.context.runtime.delay===o.context.runtime.delay&&(e.context.runtime.delay+=o.context.runtime.getMaxDuration()-e.context.runtime.delay)}}))}))}}},{key:"storeLatestTransition",value:function(t,e){Object.prototype.hasOwnProperty.call(j.LATEST_TRANSITION_BY_PROPS,t)||(j.LATEST_TRANSITION_BY_PROPS[t]={on:{},name:{}}),e.payloads.map((function(n){n.properties.map((function(n){j.LATEST_TRANSITION_BY_PROPS[t].on[n.on]=e,j.LATEST_TRANSITION_BY_PROPS[t].name[n.name]=e}))})),e.options.waitBeforeNext&&(Object.prototype.hasOwnProperty.call(j.LATEST_TRANSITION_WAIT_BEFORE_NEXT,t)||(j.LATEST_TRANSITION_WAIT_BEFORE_NEXT[t]=null),j.LATEST_TRANSITION_WAIT_BEFORE_NEXT[t]=e)}},{key:"purgeRegistry",value:function(t){delete j.LATEST_TRANSITION_BY_PROPS[t],delete j.LATEST_TRANSITION_WAIT_BEFORE_NEXT[t]}}]),t}(),M=function(){function t(e,n){f(this,t),this.id=m.random(),this.element=e,this.element_identifier=n.element_identifier,this.custom_identifier=!1,e.hasAttribute(n.element_identifier)||(e.setAttribute(n.element_identifier,m.random(12)),this.custom_identifier=!0)}return h(t,[{key:"getID",value:function(){return this.element.getAttribute(this.element_identifier)}}]),t}();function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={ELEMENT_PROPERTIES:{computed:{},origin:{}}},Y=function(){function t(e){var n,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,t),this.id=m.random(),this.group_id=null!==(n=i._group_id)&&void 0!==n?n:m.random(),this.target=e,this.options={infinite:null!==(r=i.infinite)&&void 0!==r&&r,element_attribute_identifier:null!==(o=i.element_attribute_identifier)&&void 0!==o?o:"id"},this.context={runtime:new S,status:new R},this._items=[],this._all_transitions=[],this._transition_prototype_zip=[],this._transition_attached_to_item_zip=[],this._subprocess=[]}var e;return h(t,[{key:"transition",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._transition_prototype_zip.push([t,n]),this}},{key:"play",value:(e=l(c.mark((function t(){var e,n,r,o=this,i=arguments;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=i.length>0&&void 0!==i[0]?i[0]:{},this.context.status.started&&(this.context.status.paused=!1),n=0,this.context.status.started?n=1:(this.context.runtime.start(),this.context.status.started=!0,this.__loadItems(),this._items.map((function(t){o.__saveCssProperties(t,"origin"),o.__computeCssProperties(t),o.__saveCssProperties(t,"computed")})),e.onBegin&&e.onBegin(this._items.map((function(t){return t.element}))));case 4:return r=this._subprocess.slice().map((function(t){return t.play()})),0!==n&&this.__loadItems(),this._transition_attached_to_item_zip.map((function(t){t[0].payloads.map((function(e){e.compile(t[1],t[0].options.effect,o.__retrieveSavedProperty)}))})),t.next=9,Promise.all(this._transition_attached_to_item_zip.map((function(t){return t[0].process(o,t[1],o.__retrieveSavedProperty)})));case 9:return this.context.runtime.step(),t.next=12,Promise.all(r);case 12:e.onBeforeNextLoop&&e.onBeforeNextLoop(this._items.map((function(t){return t.element}))),n++;case 14:if(this.options.infinite&&!this.context.status.paused){t.next=4;break}case 15:this.context.status.paused||(this._items.map((function(t){o.__restoreCssProperties(t,"origin")})),e.onEnd&&e.onEnd(this._items.map((function(t){return t.element}))),this.__destroy(),this.context.status.finished=!0);case 16:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"pause",value:function(){this.context.status.started&&(this.context.status.paused=!0)}},{key:"subprocess",value:function(e){var n=new t(e,D(D({},this.options),{},{infinite:!1}));return n.group_id=this.group_id,this._subprocess.push(n),n}},{key:"__destroy",value:function(){N.purgeRegistry(this.id)}},{key:"__loadItems",value:function(){var t=this;this._all_transitions=[],this._transition_attached_to_item_zip=[],this._items=Array.from(document.querySelectorAll(this.target)).map((function(e){return new M(e,{element_identifier:t.options.element_attribute_identifier})})),0!==this._items.length&&this._transition_prototype_zip.map((function(e){var n=new N(e[0]);n.payloads=n.payloads.concat(e[1]),t._all_transitions.push(n),0===t._all_transitions.length&&(n.context.runtime.delay+=50);for(var r=function(e){var r=m.clone(n);e!==n.options.repeatCount-1&&(r.options.waitBeforeNext=!1),N.cleanTransitionDelay(t.id,r),r.context.runtime.delay+=50,0!==e&&(r.context.runtime.delay+=n.options.repeatDelay);var o=void 0;t._items.map((function(e,i){(o=m.clone(r)).context.runtime.delay+=n.options.gap*i,t._transition_attached_to_item_zip.push([o,e])})),N.storeLatestTransition(t.id,o);var i=o.context.runtime.getMaxDuration();t.context.runtime.duration<i&&(t.context.runtime.duration=i)},o=0;o<n.options.repeatCount;o++)r(o)}))}},{key:"__saveCssProperties",value:function(t,e){Object.prototype.hasOwnProperty.call(C.ELEMENT_PROPERTIES[e],t.getID())||(C.ELEMENT_PROPERTIES[e][t.getID()]={}),this._all_transitions.map((function(n){n.payloads.map((function(n){n.properties.map((function(n){Object.prototype.hasOwnProperty.call(C.ELEMENT_PROPERTIES[e][t.getID()],n.on)||(C.ELEMENT_PROPERTIES[e][t.getID()][n.on]=t.element.style[n.on])}))}))}))}},{key:"__restoreCssProperties",value:function(t,e){if(Object.prototype.hasOwnProperty.call(C.ELEMENT_PROPERTIES[e],t.getID())){var n=[];this._all_transitions.map((function(r){r.payloads.map((function(o){o.properties.map((function(o){n.includes(o.on)||(r.options.endStateMode!==_&&(t.element.style[o.on]=C.ELEMENT_PROPERTIES[e][t.getID()][o.on]),n.push(o.on))}))}))}))}}},{key:"__computeCssProperties",value:function(t){this._all_transitions.map((function(e){e.payloads.map((function(e){e.properties.map((function(e){t.element.style[e.on]=window.getComputedStyle(t.element)[e.on]}))}))}))}},{key:"__retrieveSavedProperty",value:function(t,e,n){return Object.prototype.hasOwnProperty.call(C.ELEMENT_PROPERTIES[e],t.getID())&&Object.prototype.hasOwnProperty.call(C.ELEMENT_PROPERTIES[e][t.getID()],n)?C.ELEMENT_PROPERTIES[e][t.getID()][n]:""}}]),t}(),F=function t(e,n,r,o,i){f(this,t),this.on=e,this.name=n,this.value=r,this.onProcess=i,this.effect=o},X=function(){function t(e){var n,r;f(this,t),this.properties=Object.keys(e.properties).map((function(t){var n={on:"",name:"",format:""};return-1!==t.indexOf(":")?(n.on=t.split(":")[0],n.name=t.split(":")[1]):(n.on=t,n.name=t),n.format=e.properties[t],n})),this.data=null!==(n=e.data)&&void 0!==n?n:{},this.compilations=[],this.onProcess=null!==(r=e.onProcess)&&void 0!==r?r:null}return h(t,[{key:"compile",value:function(t,e,n){var r=this,o=[];this.properties.map((function(i){var a={on:i.on,name:i.name,value:null,onProcess:null,effect:e},s={};a.value=Object.keys(r.data).reduce((function(e,o){var a;return m.typing.isString(r.data[o])&&"{default}"===r.data[o]?n(t,"computed",i.on).replace(/([\d.]+)(px|pt|em|%)/,"$1"):(a=m.typing.isFunction(r.data[o])?r.data[o](t.element):m.typing.isString(r.data[o])&&r.data[o].match(/{[A-Z0-9]+}/i)?s[r.data[o].match(/([A-Z0-9]+)/i)[0]]:r.data[o],s[o]=a,e=e.replace("{".concat(o,"}"),a))}),i.format),null===r.onProcess?a.onProcess=function(t,e,n,r,o){"transform"===e?o.replaceTransform(t,n,r):t.style[e]=r}:a.onProcess=r.onProcess,o.push(new F(a.on,a.name,a.value,a.effect,a.onProcess))})),this.compilations=o}}]),t}(),z={sequence:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Y(t,e)},payloads:{create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new X(t)},toWidth:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new X({properties:{width:"{width}".concat(e?"%":"px")},data:{width:t}})},toHeight:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new X({properties:{height:"{height}".concat(e?"%":"px")},data:{height:t}})},toBackground:function(t,e,n){return new X({properties:{background:"rgb({r}, {g}, {b})"},data:{r:t,g:e,b:n}})},toOpacity:function(t){return new X({properties:{opacity:"{opacity}"},data:{opacity:t}})},toColor:function(t,e,n){return new X({properties:{color:"rgb({r}, {g}, {b})"},data:{r:t,g:e,b:n}})},toHexColor:function(t){return new X({properties:{color:"#{hex}"},data:{hex:t}})},toTop:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new X({properties:{top:"{top}px"},data:{top:function(n){return e?m.heightToRelativePercentPx(t,n):t}}})},toCenterTopOf:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return z.payloads.create({properties:{top:"{top}px"},data:{top:function(n){return(e?m.heightToRelativePercentPx(t,n):t)-n.getBoundingClientRect().height/2}}})},toLeft:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new X({properties:{left:"{left}px"},data:{left:function(n){return e?m.widthToRelativePercentPx(t,n):t}}})},toCenterLeftOf:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return z.payloads.create({properties:{left:"{left}px"},data:{left:function(n){return(e?m.widthToRelativePercentPx(t,n):t)-n.getBoundingClientRect().width/2}}})},toCenterOf:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return z.payloads.create({properties:{left:"{left}px",top:"{top}px"},data:{left:function(e){return(n?m.widthToRelativePercentPx(t,e):t)-e.getBoundingClientRect().width/2},top:function(t){return(n?m.heightToRelativePercentPx(e,t):e)-t.getBoundingClientRect().height/2}}})},toRight:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new X({properties:{right:"{right}px"},data:{right:function(n){return e?m.widthToRelativePercentPx(t,n):t}}})},toBottom:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new X({properties:{bottom:"{bottom}px"},data:{bottom:function(n){return e?m.heightToRelativePercentPx(t,n):t}}})},toMargin:function(t,e,n,r){return new X({properties:{margin:"{mgTop}px {mgRight}px {mgBottom}px {mgLeft}px"},data:{mgTop:t,mgRight:e,mgBottom:n,mgLeft:r}})},toTranslate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new X({properties:{"transform:translate":"translate({translateX}px, {translateY}px)"},data:{translateX:function(e){return n?m.widthToRelativePercentPx(t,e):t},translateY:function(t){return n?m.heightToRelativePercentPx(e,t):e}}})},toTranslateX:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new X({properties:{"transform:translate":"translateX({translateX}px)"},data:{translateX:function(n){return e?m.widthToRelativePercentPx(t,n):t}}})},toTranslateY:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new X({properties:{"transform:translate":"translateY({translateY}px)"},data:{translateY:function(n){return e?m.heightToRelativePercentPx(t,n):t}}})},toSkew:function(t,e){return new X({properties:{"transform:skew":"skew({skewX}deg, {skewY}deg)"},data:{skewX:t,skewY:e}})},toRotate3D:function(t,e,n,r){return new X({properties:{"transform:rotate3d":"rotate3d({axisX}, {axisY}, {axisZ}, {degree}deg)"},data:{axisX:t,axisY:e,axisZ:n,degree:r}})},toScale:function(t,e){return new X({properties:{"transform:scale":"scale({scaleX}, {scaleY})"},data:{scaleX:t,scaleY:e}})},toAbsolute:function(){return z.payloads.create({properties:{position:"absolute"},data:{}})},toTextAlignRight:function(){return z.payloads.create({properties:{textAlign:"right"},data:{}})},toFloatRight:function(){return z.payloads.create({properties:{float:"right"},data:{}})},toFloatLeft:function(){return z.payloads.create({properties:{float:"left"},data:{}})}},tools:{randint:m.randint,range:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i(Array(t).keys()).map((function(t){return t+e}))},widthToRelativePercentPx:m.widthToRelativePercentPx,heightToRelativePercentPx:m.heightToRelativePercentPx,nextOf:m.nextOf,prevOf:m.prevOf,current:m.current}};export default z;
